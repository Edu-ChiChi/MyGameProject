<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>교육 전략 시뮬레이션: 학습 고민 해결</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <div id="initial-problem-area" class="screen">
        <div class="problem-box">
            <p>"안녕하세요, 저는 상명고등학교 1학년 학생입니다. 곧 기말고사가 다가오는데, 공부할 내용이 너무 많아서 어디서부터 시작해야 할지 모르겠어요. 혼자서 밤새도록 책상에 앉아 있어도 집중이 잘 안 되고, 성적도 오르지 않아서 너무 막막합니다. 그래서 친구들과 함께 스터디를 해보려고 했는데, 무엇을 어떻게 해야 할지 모르겠어요."</p>
        </div>
        <button id="consult-button" class="action-button large-button">고민 상담해주기</button>
        
        <button id="start-crossword-button-initial" class="action-button large-button" style="position: absolute; bottom: 20px; right: 20px;">
            📝 교과서 십자말풀이
        </button>
    </div>

    <div id="expert-selection-area" class="screen" style="display: none;">
        <h2>고민 해결 전문가 선택</h2>
        <p>어떤 학습 전략 전문가에게 먼저 상담을 받아보시겠어요?</p>
        <div class="expert-container">
            <div id="expert-behaviorism" class="expert" data-strategy="behaviorism">
                <div class="behaviorism-bubble expert-bubble"></div>
                <h3>행동주의 전문가</h3>
                <button class="select-button">선택</button>
            </div>
            <div id="expert-cognitivism" class="expert" data-strategy="cognitivism">
                <div class="cognitivism-bubble expert-bubble"></div>
                <h3>인지주의 전문가</h3>
                <button class="select-button">선택</button>
            </div>
            <div id="expert-constructivism" class="expert" data-strategy="constructivism">
                <div class="constructivism-bubble expert-bubble"></div>
                <h3>구성주의 전문가</h3>
                <button class="select-button">선택</button>
            </div>
        </div>
        <button id="restart-button-selection" class="action-button large-button" style="margin-top: 30px; display: none;">
            다른 전략 체험하기
        </button>
    </div>

    <div id="mission-area" class="screen" style="display: none;">
        <button id="abandon-mission-button" class="action-button small-button">다른 전략 체험하기 (포기)</button>
        
        <div id="behaviorism-mission" class="mission-screen" style="display: none;">
            <h3>행동주의 미션: 습관의 저금통 🐖</h3>
            <div id="token-display">
                현재 집중력 코인: <span id="current-tokens">0</span>개
                <div id="piggy-bank">🐖</div>
            </div>

            <div id="task-card-container">
                </div>

            <div id="exchange-area">
                <button id="open-exchange-button" class="action-button small-button large-button">✨ 코인 교환소 열기</button>
            </div>
        </div>

        <div id="cognitivism-mission" class="mission-screen" style="display: none;">
            <h3>인지주의 미션: 기억의 방 탈출 🧠</h3>
            <p class="mission-guide">"기억의 방에 갇혔어요! 흩어진 조각들을 연결해서 완전한 개념을 만들어야 탈출할 수 있습니다. 먼저 비슷한 것끼리 묶어볼까요?"</p>
            
            <div id="puzzle-area">
                <div id="drop-zones-container">
                    <div class="drop-zone" data-category="행동주의"><h4>행동주의</h4></div>
                    <div class="drop-zone" data-category="인지주의"><h4>인지주의</h4></div>
                    <div class="drop-zone" data-category="구성주의"><h4>구성주의</h4></div>
                </div>
                <div id="puzzle-pieces-container">
                    </div>
            </div>
        </div>
        
        <div id="constructivism-mission" class="mission-screen" style="display: none;">
            <h3>구성주의 미션: 지식 공유 멘토 🤝</h3>
            
            <div class="dialogue-box">
                <p id="mentee-dialogue" class="mentee-text"></p>
            </div>
            
            <div id="scaffolding-choices" class="choice-area">
                </div>
            
            <div id="mentor-result-message" style="display: none; margin-top: 20px; text-align: left;">
                <h4>친구의 반응</h4>
                <p id="mentee-reaction-text"></p>
                
                <div id="mentor-reward-area" style="margin-top: 15px;">
                    <p>획득 뱃지: <strong id="mentor-badge"></strong></p>
                    <p>획득 협력 포인트: <strong id="mentor-points"></strong>점</p>
                </div>
                <button id="complete-mentor-mission" class="action-button large-button" style="margin-top: 20px;">미션 완료!</button>
            </div>
        </div>
    </div>

    <div id="resolution-area" class="screen" style="display: none;">
        <h2>🎉 미션 성공!</h2>
        <div class="resolution-box">
            <p id="resolution-message" class="main-message"></p>
            <h4>이론적 학습 전이 효과</h4>
            <p id="resolution-effect" class="effect-message"></p>
        </div>
        <button id="restart-button" class="action-button large-button">다른 전략 체험하기</button>
    </div>
    
    <div id="exchange-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>코인 교환소</h3>
            <p>현재 집중력 코인: <span id="modal-current-tokens">0</span>개</p>
            
            <div class="exchange-item">
                <p>개념 요약 포션 (1코인)</p>
                <p class="reward-effect">다음 목표 달성 시 코인 2배 획득 (1+1)</p>
                <button class="exchange-button action-button" data-cost="1" data-id="potion">구매</button>
            </div>
            <div class="exchange-item">
                <p>집중력 강화 물약 (3코인)</p>
                <p class="reward-effect">미션 완료 코인(5코인)으로 즉시 전환</p>
                <button class="exchange-button action-button" data-cost="3" data-id="focus">구매</button>
            </div>
            <div class="exchange-item">
                <p>다음 단원 미리보기 요약 영상 (5코인)</p>
                <p class="reward-effect">단원 마무리 시 사용 가능 (미션 완료)</p>
                <button class="exchange-button action-button" data-cost="5" data-id="preview">구매</button>
            </div>
            
            <button id="close-modal-button" class="action-button small-button">닫기</button>
        </div>
    </div>

    <div id="crossword-game-modal" class="modal-overlay" style="display: none; z-index: 2001;">
        <div class="modal-content" style="max-width: 800px;">
            <h3>📝 단원 마무리 교과서 십자말풀이</h3>
            <p id="crossword-message" class="mission-guide"></p>
            
            <div style="display: flex; gap: 30px; margin-top: 20px; text-align: left;">
                <table id="crossword-grid" style="flex-shrink: 0; border-collapse: collapse; margin-bottom: 20px;">
                    </table>
                
                <div style="flex-grow: 1;">
                    <div id="crossword-clues">
                        <h4>문항 목록 (자유 선택)</h4>
                        <div id="crossword-question-list">
                            </div>
                    </div>
                    <div id="current-question-area" style="margin-top: 15px; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <h4 id="current-clue-title">선택된 문항이 없습니다.</h4>
                        <p id="current-clue-text" style="font-size: 0.9em; margin-bottom: 10px;"></p>
                        <p id="feedback-hint" style="color: #ff5555; font-weight: bold; margin-top: 5px; display: none;"></p>
                        <div id="input-container" style="display: none;">
                             <input type="text" id="crossword-answer-input" placeholder="정답을 입력하세요." maxlength="10">
                             <button id="check-answer-button" class="action-button small-button">정답 확인</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <button id="close-crossword-modal" class="action-button large-button">뒤로 가기 (진행 상황 초기화)</button>
        </div>
    </div>

    <script src="js/data.js"></script>
    <script src="js/behaviorism.js"></script>
    <script src="js/cognitivism.js"></script>
    <script src="js/constructivism.js"></script>
    <script src="js/crossword.js"></script>
    <script src="js/game.js"></script>
</body>
</html>